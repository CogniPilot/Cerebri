#include <zephyr/kernel.h>

#include <stdio.h>
#include <stdlib.h>
#include <signal.h>

static volatile int keepRunning = 1;

void intHandler(int dummy) {
    keepRunning = 0;
    printf("sigint caught\n");
    exit(0);
}

int main(void) {
    signal(SIGINT, intHandler);

    // all tasks are handled by threads
    const char * banner =
    "                            \033[0m\033[38;5;252m              ▄▄▄▄▄▄▄▄\n"
    "\033[2;34m         ▄▄▄▄▄ \033[2;33m▄▄▄▄▄\033[0m\033[38;5;252m                    ▀▀▀▀▀▀▀▀▀\n"
    "\033[2;34m     ▄███████▀\033[2;33m▄██████▄\033[0m\033[38;5;252m   ▀█████████████████████▀\n"
    "\033[2;34m  ▄██████████ \033[2;33m████████\033[31m ▄\033[0m\033[38;5;249m   ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄\n"
    "\033[2;34m ███████████▀ \033[2;33m███████▀\033[31m ██\033[0m\033[38;5;249m   ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀\n"
    "\033[2;34m█████████▀   \033[2;33m▀▀▀▀▀▀▀▀\033[31m ████\033[0m\033[38;5;246m   ▀███████████▀\n"
    "\033[2;34m▀█████▀ \033[2;32m▄▄███████████▄\033[31m ████\033[0m\033[38;5;243m   ▄▄▄▄▄▄▄▄▄\n"
    "\033[2;34m  ▀▀▀ \033[2;32m███████████████▀\033[31m ████\033[0m\033[38;5;243m   ▀▀▀▀▀▀▀▀\n"
    "       \033[2;32m▀▀█████▀▀▀▀▀▀\033[31m  ▀▀▀▀\033[0m\033[38;5;240m   ▄█████▀\n"
    "              \033[2;90m ████████▀    ▄▄▄\n"
    "              \033[2;90m ▀███▀       ▀▀▀\n"
    "              \033[2;90m  ▀▀      \033[0m\n"
    "╔═══╗╔═══╗╔═══╗╔═╗ ╔╗╔══╗╔═══╗╔══╗╔╗   ╔═══╗╔════╗\n"
    "║╔═╗║║╔═╗║║╔═╗║║║║ ║║╚╣╠╝║╔═╗║╚╣╠╝║║   ║╔═╗║║╔╗╔╗║\n"
    "║║ ╚╝║║ ║║║║ ╚╝║║╚╗║║ ║║ ║║ ║║ ║║ ║║   ║║ ║║╚╝║║╚╝\n"
    "║║   ║║ ║║║║╔═╗║╔╗╚╝║ ║║ ║╚═╝║ ║║ ║║   ║║ ║║  ║║  \n"
    "║║ ╔╗║║ ║║║║╚╗║║║╚╗║║ ║║ ║╔══╝ ║║ ║║ ╔╗║║ ║║  ║║  \n"
    "║╚═╝║║╚═╝║║╚═╝║║║ ║║║╔╣╠╗║║   ╔╣╠╗║╚═╝║║╚═╝║ ╔╝╚╗ \n"
    "╚═══╝╚═══╝╚═══╝╚╝ ╚═╝╚══╝╚╝   ╚══╝╚═══╝╚═══╝ ╚══╝ \n\033[31m"
    "       ┏━━━┓┏━━━┓┏━━━┓┏━━━┓┏━━┓ ┏━━━┓┏━━┓\n"
    "       ┃┏━┓┃┃┏━━┛┃┏━┓┃┃┏━━┛┃┏┓┃ ┃┏━┓┃┗┫┣┛\n"
    "       ┃┃ ┗┛┃┗━┓ ┃┗━┛┃┃┗━┓ ┃┗┛┗┓┃┗━┛┃ ┃┃ \n"
    "       ┃┃ ┏┓┃┏━┛ ┃┏┓┏┛┃┏━┛ ┃┏━┓┃┃┏┓┏┛ ┃┃ \n"
    "       ┃┗━┛┃┃┗━━┓┃┃┃┗┓┃┗━━┓┃┗━┛┃┃┃┃┗┓┏┫┣┓\n"
    "       ┗━━━┛┗━━━┛┗┛┗━┛┗━━━┛┗━━━┛┗┛┗━┛┗━━┛\n\033[0m";

    printf("%s\n", banner);
    while(keepRunning) {
        k_msleep(1000);
    }
    return 0;
}